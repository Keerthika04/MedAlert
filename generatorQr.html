<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Generator</title>
    <style>
        #qrcode canvas {
            width: 400px; /* Adjust the size as needed */
            height: 400px;
        }
    </style>
</head>
<body>
    <h1>QR Code Generator</h1>
    
    <label for="event-select">Select Event:</label>
    <select id="event-select">
        <option value="evt15">evt15</option>
        <option value="evt16">evt16</option>
        <option value="evt17">evt17</option>
    </select>

    <button onclick="generateQRCode()">Generate QR Code</button>
    <div id="qrcode"></div>
    <button id="download-btn" style="display: none;" onclick="downloadQRCode()">Download QR Code</button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <script>
        function generateQRCode() {
            const selectedText = document.getElementById('event-select').value;
            const qr = qrcode(1, 'H'); // Use version 6 and high error correction level
            qr.addData(selectedText);
            qr.make();

            // Create a canvas to render the QR code
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 400; // Larger width
            canvas.height = 400; // Larger height

            // Draw the QR code on the canvas
            const cellSize = canvas.width / qr.getModuleCount();
            for (let row = 0; row < qr.getModuleCount(); row++) {
                for (let col = 0; col < qr.getModuleCount(); col++) {
                    ctx.fillStyle = qr.isDark(row, col) ? '#000000' : '#ffffff';
                    ctx.fillRect(col * cellSize, row * cellSize, cellSize, cellSize);
                }
            }

            // Display the canvas in the #qrcode div
            document.getElementById('qrcode').innerHTML = '';
            document.getElementById('qrcode').appendChild(canvas);

            // Show the download button
            document.getElementById('download-btn').style.display = 'inline';
        }

        function downloadQRCode() {
            const canvas = document.querySelector('#qrcode canvas');
            const dataUrl = canvas.toDataURL('image/png');

            const link = document.createElement('a');
            link.href = dataUrl;
            link.download = 'qrcode.png';
            link.click();
        }
    </script>
</body>
</html>
